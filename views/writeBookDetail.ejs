<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>


</head>
<body>

    <div class="mainPagetop">
    </div>
    <div class="bookInfoContainer">
        <div>
            이미지
        </div>
        <div class="bookContent">
            <div>
                책 제목
            </div>
            <div>
                작가
            </div>
            <div>
                출판사
            </div>
            <div>
                출간일
            </div>
        </div>
    </div>

    <div class= "bookDetailContainer">
        <div class="firstComment">
            책과 함께했던 당신의 기억을 적어주세요.
        </div>
        <div class="detailContainer">
            <div class="motivate">
                이 책을 읽게 된 계기
            </div>
            <div class="evaluation">
                책에 대한 간단한 평가

                <div class="funContainer parentContainer">
                    <div class="evalWord">
                        재미
                    </div>
                    <div class="BoxNComment">
                        <div class="PointContainer">
                            <div class="PointNum funPoint">
                                8/10
                            </div>
                            <div class="PointBox">
                                box
                            </div>
                        </div>
                        <div class="funComment">
                            왜 재밋엇냐면
                        </div>
                    </div>
                </div>

                <div class="readContainer parentContainer">
                    <div class="evalWord">
                        가독성
                    </div>
                    <div class="BoxNComment">
                        <div class="PointContainer">
                            <div class="PointNum readPoint">
                                8/10
                            </div>
                            <div class="PointBox">
                                box
                            </div>
                        </div>
                        <div class="readComment">
                            왜 재밋엇냐면
                        </div>
                    </div>
                </div>

                <div class="usefulContainer parentContainer">
                  <div class="evalWord">
                        유용성
                    </div>
                    <div class="BoxNComment">
                        <div class="PointContainer">
                            <div class="PointNum usefPoint">
                                8/10
                            </div>
                            <div class="PointBox">
                                box
                            </div>
                        </div>
                        <div class="usefComment">
                            왜 재밋엇냐면
                        </div>
                    </div>
                </div>
                <div class="literacyContainer parentContainer">
                    <div class="evalWord">
                        문장력
                    </div>
                    <div class="BoxNComment">
                        <div class="PointContainer">
                            <div class="PointNum literPoint">
                                8/10
                            </div>
                            <div class="PointBox">
                                box
                            </div>
                        </div>
                        <div class="literComment">
                            왜 재밋엇냐면
                        </div>
                    </div>
                </div>
                <div class="messageContainer parentContainer">
                    <div class="evalWord">
                        메시지
                    </div>
                    <div class="BoxNComment">
                        <div class="PointContainer">
                            <div class="PointNum msgPoint">
                                8/10
                            </div>
                            <div class="PointBox">
                                box
                            </div>
                        </div>
                        <div class="msgComment">
                            왜 재밋엇냐면
                        </div>
                    </div>
                </div>
            </div>
            <div class="introduce">
                책 한 줄 소개
            </div>
        </div>
    </div>

    <div class= "finishBtn">

    </div>


</body>
<footer class="footer">
    <%-include('navigation')%>
</footer>
</html>

<script type="text/javascript">
  var bookList = new Array();
  var bookArea = document.getElementById("bookArea");
  var data = false;


    function bookSearch() {
        var bookName = document.getElementById('bookName').value;
        console.log(bookName);
        $.ajax({
                type: 'post',
                url: '/searchBook',
                data: {
                    'book' : bookName
                },
                dataType: 'json'
            })
            .success(function (result){
               // var jsonData = JSON.stringify(result); 
                bookList = result;
                makeBookDiv();
                //console.log(result);
            })
            .fail(function (xhr, status, error){
                alert("error");
            })
    }

    function makeBookDiv() {
        if(data){
            while(bookArea.firstChild){
                bookArea.removeChild(bookArea.firstChild);
            }
        }

        for(book in bookList){
            data = true;
            var bookContainer = document.createElement("div");
            var bookInfos = document.createElement("div");
            var bookCover = document.createElement("div");
            var bookCoverImg = document.createElement("img");
            var title = document.createElement("div");
            var author = document.createElement("div");
            var publish = document.createElement("div");
            var date = document.createElement("div");

            bookContainer.setAttribute("class", "books");
            bookInfos.setAttribute("class", "bookInfo");
            title.setAttribute("class", "title");
            author.setAttribute("class", "author");
            publish.setAttribute("class", "publish");
            date.setAttribute("class", "date");
            bookCover.setAttribute("class", "bookCover");
            bookCoverImg.setAttribute("class", "bookCoverimg");


            console.log(bookList);
            console.log("book: ", bookList[book].title);
            bookArea.appendChild(bookContainer);
            bookContainer.appendChild(bookInfos);
            bookContainer.appendChild(bookCover);

            bookInfos.appendChild(title);
            bookInfos.appendChild(author);
            bookInfos.appendChild(publish);
            bookInfos.appendChild(date);

            bookCover.appendChild(bookCoverImg);

            title.innerHTML = bookList[book].title;
            author.innerHTML = bookList[book].author;
            publish.innerHTML = bookList[book].publisher;
            date.innerHTML = bookList[book].pubdate;
            bookCoverImg.setAttribute('src', bookList[book].image);
        }
    }
    //console.log(bookList);
</script>